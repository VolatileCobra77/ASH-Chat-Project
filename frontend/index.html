<!DOCTYPE html>
<html data-theme="" class="h-full">
    <head>
        <link rel="stylesheet" href="/public/src/custom.css">
        <link rel="stylesheet" href="/public/src/output.css?v=12312312">
        
        <link rel="stylesheet" href="https://static.snoweb.io/snowebsvg/dist/css/themes-0.0.131.css">
        <link rel="preload" as="image" href="/public/media/root/default_pfp.png">
        <meta name="viewport" content="viewport-fit=cover">
        <meta name="description" content="A simple chat application developed for fun by a group of friends">
        
        <style>
            .message a{
                color:var(--sc);
                text-decoration:underline;
            }
        </style>
        <style>
            :root {
                --svg-theme-light-primary: #1f2937;
                --svg-theme-light-secondary: #E63946;
                --svg-theme-light-tertiary: #F7F7F7;
        
                --svg-theme-dark-primary: #a6adbb;
                --svg-theme-dark-secondary: #E63946;
                --svg-theme-dark-tertiary: #112032;
            }
        </style>
    </head>
    <body class="flex flex-row h-dvh">
        <div class="flex flex-col flex-grow">
            <div id="chat-window" class="ml-5 mt-5 mr-0 mb-0 w-full bg-neutral max-w-[70vw] min-w-[70vw] h-full flex flex-col max-h-full overflow-y-auto overflow-x-hidden whitespace-normal border border-primary rounded-xl p-4 font-victor">
            </div>


            <div class="flex py-2" style="bottom: 100px;">
                <form id="message-input" class="flex flex-row w-full max-w-[73vw] min-w-[73vw]">
                    <input  class="input input-bordered  input-primary input-md w-full ml-5 mr-1" type="text" name="chatMessage" id="message">
                    <button type="submit" class="btn  btn-md btn-secondary ml-1 mr-5">send</button>
                </form>
            </div>
        </div>
        <div class="flex flex-col max-w-[25vw] min-w-[25vw]">
            <div class="flex flex-grow flex-col flex-1 w-full">
                <ul class="menu menu-horizontal bg-base-300 w-full menu-md h-13 rounded-lg">
                    <li class="mx-3"><a id="nav-Online"href="#" class="active" onclick="activateOnline()">Online</a></li>
                    <li class="mx-3"><a id="nav-Groups" href="#" onclick="activateGroups()">Groups</a></li>
                    <li class="mx-3"><a id="nav-Friends" href="#" onclick="activateFriends()">Friends</a></li>
                </ul>
                <div id="onlineContent" class="flex flex-col flex-grow w-full h-full">
                    a
                </div>
                <div id="groupsContent" class="hidden flex-col flex-grow w-full h-full">
                    b
                </div>
                <div id="friendsContent" class="hidden flex-col flex-grow w-full h-full">
                    c
                </div>
                <div class="flex flex-row flex-grow w-full h-5">
                    <div class="" id="timeUpdate"> ↑ <span id="up">100</span>ms | ↓ <span id="down">100</span>ms<input type="number" min="100" max="10000" step="1" id="socketPingIntChange" name="socketPingIntChange" value="1000" style="display:none;width:50px;"></div>
                    <div class="flex flex-grow"></div>
                </div>
            </div>
            <div class="flex flex-row with-full align-center justify-around h-16 align-bottom">
                      <button onclick="document.getElementById('my-drawer').checked = !document.getElementById('my-drawer').checked">
                        <svg class="svg-snoweb stroke-primary fill-secondary h-8" height="100" preserveaspectratio="xMidYMid meet" viewbox="0 0 100 100" width="100" x="0" xmlns="http://www.w3.org/2000/svg" y="0">
                            <path class="svg-stroke-primary" d="M44,22.6a6.2,6.2,0,0,1,12,0,6.2,6.2,0,0,0,9.2,3.8,6.1,6.1,0,0,1,8.4,8.4A6.2,6.2,0,0,0,77.4,44a6.2,6.2,0,0,1,0,12,6.2,6.2,0,0,0-3.8,9.2,6.1,6.1,0,0,1-8.4,8.4A6.2,6.2,0,0,0,56,77.4a6.2,6.2,0,0,1-12,0,6.2,6.2,0,0,0-9.2-3.8,6.1,6.1,0,0,1-8.4-8.4A6.2,6.2,0,0,0,22.6,56a6.2,6.2,0,0,1,0-12,6.2,6.2,0,0,0,3.8-9.2,6.1,6.1,0,0,1,8.4-8.4A6.2,6.2,0,0,0,44,22.6Z" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="8">
                            </path>
                            <path class="svg-stroke-primary" d="M60.7,50A10.7,10.7,0,1,1,50,39.3,10.7,10.7,0,0,1,60.7,50Z" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="8">
                            </path>
                           </svg>
                      <span class="btm-nav-label text-primary">Settings</span>
                    </button>
                <button >
                    <svg class="svg-snoweb fill-secondary stroke-primary h-8" height="100" preserveaspectratio="xMidYMid meet" viewbox="0 0 100 100" width="100" x="0" xmlns="http://www.w3.org/2000/svg" y="0">
                        <path class="svg-stroke-primary" d="M67.8,32.2H75a7.1,7.1,0,0,1,7.1,7.1V60.7A7.1,7.1,0,0,1,75,67.8H67.8V82.1L53.6,67.8H39.3a6.8,6.8,0,0,1-5-2.1m0,0L46.4,53.6H60.7a7.1,7.1,0,0,0,7.1-7.2V25a7.1,7.1,0,0,0-7.1-7.1H25A7.1,7.1,0,0,0,17.9,25V46.4A7.1,7.1,0,0,0,25,53.6h7.2V67.8Z" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="8">
                        </path>
                       </svg>
                  <span class="btm-nav-label text-primary font-bold">Chat</span>
                </button>
                <button id="loginBtn" onclick="keycloak.login()">
                    <svg class="svg-snoweb fill-secondary stroke-primary h-8" height="100" preserveaspectratio="xMidYMid meet" viewbox="0 0 100 100" width="100" x="0" xmlns="http://www.w3.org/2000/svg" y="0">
                        <path class="svg-stroke-primary" d="M46.4,64.3,32.2,50m0,0L46.4,35.7M32.2,50H82.1M64.3,64.3v3.5A10.7,10.7,0,0,1,53.6,78.5h-25A10.7,10.7,0,0,1,17.9,67.8V32.2A10.7,10.7,0,0,1,28.6,21.5h25A10.7,10.7,0,0,1,64.3,32.2v3.5" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="8">
                        </path>
                       </svg>
                  <span class="btm-nav-label text-primary">Login</span>
                </button>
                <button id="logoutBtn" class="hidden"  onclick="keycloak.logout()">
                    <svg class="svg-snoweb fill-secondary stroke-primary h-8" height="100" preserveaspectratio="xMidYMid meet" viewbox="0 0 100 100" width="100" x="0" xmlns="http://www.w3.org/2000/svg" y="0">
                        <path class="svg-stroke-primary" d="M67.8,64.3,82.1,50m0,0L67.8,35.7M82.1,50H32.2M53.6,64.3v3.5A10.7,10.7,0,0,1,42.9,78.5H28.6A10.7,10.7,0,0,1,17.9,67.8V32.2A10.7,10.7,0,0,1,28.6,21.5H42.9A10.7,10.7,0,0,1,53.6,32.2v3.5" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="8">
                        </path>
                       </svg>
                  <span class="btm-nav-label text-primary">Logout</span>
                </button>
                <div class="drawer drawer-end">
                    <input id="my-drawer" type="checkbox" class="drawer-toggle hidden" />
                    <div class="drawer-content">
                      <!-- Page content here -->
                      <label for="my-drawer" class="btn btn-primary drawer-button hidden">Open drawer</label>
                    </div>
                    <div class="drawer-side">
                        
                      <label for="my-drawer" aria-label="close sidebar" class="drawer-overlay"></label>
                      <div class="bg-base-200 text-base-content min-h-full w-80 p-4">
                        <div class="collapse collapse-plus bg-base-200">
                            <input type="checkbox" name="my-accordion-3" />
                            <div class="collapse-title text-xl font-medium">Theme</div>
                            <div class="collapse-content">
                              <div class="dropdown mb-[10px]">
                                <div tabindex="0" role="button" class="btn m-1">
                                  Custom Theme
                                  <svg
                                    width="12px"
                                    height="12px"
                                    class="inline-block h-2 w-2 fill-current opacity-60"
                                    xmlns="http://www.w3.org/2000/svg"
                                    viewBox="0 0 2048 2048">
                                    <path d="M1799 349l242 241-1017 1017L7 590l242-241 775 775 775-775z"></path>
                                  </svg>
                                </div>
                                <ul tabindex="0" class="dropdown-content bg-base-300 rounded-box z-[1] w-52 p-2 shadow-2xl">
                                  <li>
                                    <button class="btn btn-primary btn-sm">New Theme</button>
                                  </li>
                                  <li>
                                    <input
                                      type="radio"
                                      name="theme-buttons"
                                      class="theme-controller btn btn-sm btn-block btn-ghost justify-start"
                                      aria-label="Custom"
                                      value="`${username}-custom`" />
                                  </li>
                                </ul>
                              </div>
                                <div id="theme-buttons" class="join join-vertical">
                                    <input type="radio" name="theme-buttons" id="th-light" class="btn theme-controller join-item" aria-label="Light" value="light" />
                                    <input type="radio" name="theme-buttons" id="th-dark" class="btn theme-controller join-item" aria-label="Dark" value="dark" />
                                    <input type="radio" name="theme-buttons" id="th-cupcake" class="btn theme-controller join-item" aria-label="Cupcake" value="cupcake" />
                                    <input type="radio" name="theme-buttons" id="th-bumblebee" class="btn theme-controller join-item" aria-label="Bumblebee" value="bumblebee" />
                                    <input type="radio" name="theme-buttons" id="th-emerald" class="btn theme-controller join-item" aria-label="Emerald" value="emerald" />
                                    <input type="radio" name="theme-buttons" id="th-corporate" class="btn theme-controller join-item" aria-label="Corporate" value="corporate" />
                                    <input type="radio" name="theme-buttons" id="th-synthwave" class="btn theme-controller join-item" aria-label="Synthwave" value="synthwave" />
                                    <input type="radio" name="theme-buttons" id="th-retro" class="btn theme-controller join-item" aria-label="Retro" value="retro" />
                                    <input type="radio" name="theme-buttons" id="th-cyberpunk" class="btn theme-controller join-item" aria-label="Cyberpunk" value="cyberpunk" />
                                    <input type="radio" name="theme-buttons" id="th-valentine" class="btn theme-controller join-item" aria-label="Valentine" value="valentine" />
                                    <input type="radio" name="theme-buttons" id="th-halloween" class="btn theme-controller join-item" aria-label="Halloween" value="halloween" />
                                    <input type="radio" name="theme-buttons" id="th-garden" class="btn theme-controller join-item" aria-label="Garden" value="garden" />
                                    <input type="radio" name="theme-buttons" id="th-forest" class="btn theme-controller join-item" aria-label="Forest" value="forest" />
                                    <input type="radio" name="theme-buttons" id="th-aqua" class="btn theme-controller join-item" aria-label="Aqua" value="aqua" />
                                    <input type="radio" name="theme-buttons" id="th-lofi" class="btn theme-controller join-item" aria-label="Lofi" value="lofi" />
                                    <input type="radio" name="theme-buttons" id="th-pastel" class="btn theme-controller join-item" aria-label="Pastel" value="pastel" />
                                    <input type="radio" name="theme-buttons" id="th-fantasy" class="btn theme-controller join-item" aria-label="Fantasy" value="fantasy" />
                                    <input type="radio" name="theme-buttons" id="th-wireframe" class="btn theme-controller join-item" aria-label="Wireframe" value="wireframe" />
                                    <input type="radio" name="theme-buttons" id="th-black" class="btn theme-controller join-item" aria-label="Black" value="black" />
                                    <input type="radio" name="theme-buttons" id="th-luxury" class="btn theme-controller join-item" aria-label="Luxury" value="luxury" />
                                    <input type="radio" name="theme-buttons" id="th-dracula" class="btn theme-controller join-item" aria-label="Dracula" value="dracula" />
                                    <input type="radio" name="theme-buttons" id="th-cmyk" class="btn theme-controller join-item" aria-label="CMYK" value="cmyk" />
                                    <input type="radio" name="theme-buttons" id="th-autumn" class="btn theme-controller join-item" aria-label="Autumn" value="autumn" />
                                    <input type="radio" name="theme-buttons" id="th-business" class="btn theme-controller join-item" aria-label="Business" value="business" />
                                    <input type="radio" name="theme-buttons" id="th-acid" class="btn theme-controller join-item" aria-label="Acid" value="acid" />
                                    <input type="radio" name="theme-buttons" id="th-lemonade" class="btn theme-controller join-item" aria-label="Lemonade" value="lemonade" />
                                    <input type="radio" name="theme-buttons" id="th-night" class="btn theme-controller join-item" aria-label="Night" value="night" />
                                    <input type="radio" name="theme-buttons" id="th-coffee" class="btn theme-controller join-item" aria-label="Coffee" value="coffee" />
                                    <input type="radio" name="theme-buttons" id="th-winter" class="btn theme-controller join-item" aria-label="Winter" value="winter" />
                                    <input type="radio" name="theme-buttons" id="th-dim" class="btn theme-controller join-item" aria-label="Dim" value="dim" />
                                    <input type="radio" name="theme-buttons" id="th-nord" class="btn theme-controller join-item" aria-label="Nord" value="nord" />
                                    <input type="radio" name="theme-buttons" id="th-sunset" class="btn theme-controller join-item" aria-label="Sunset" value="sunset" />                                    
                                    
                                  </div>
                                  <script>
                                    document.addEventListener("DOMContentLoaded", function () {
                                    // Assuming `settings` is an object loaded from localStorage or declared earlier
                                    if (settings && settings.Theme) {
                                        if (document.getElementById(`th-${settings.Theme}`)) {
                                            document.getElementById(`th-${settings.Theme}`).checked = true; // Correct way to set radio button checked
                                        }
                                    }

                                    // Listen for changes in theme-buttons
                                    document.getElementById('theme-buttons').addEventListener('change', function(event) {
                                        console.log(event.target); // Check which element triggered the event
                                        if (event.target.name === "theme-buttons") {
                                            settings.Theme = event.target.value;
                                            console.log("Selected theme:", settings.Theme); // Debug the value
                                            localStorage.setItem("settings", JSON.stringify(settings));
                                        }
                                    });
                                    })

                                </script>
                            </div>
                          </div>
                        <div class="collapse collapse-plus bg-base-200">
                            <input type="checkbox"  />
                            <div class="collapse-title text-xl font-medium">Notifications</div>
                            <div class="collapse-content">
                                <div class="flex flex-col" id="notifRadio">
                                    
                                    <div class="flex flex-row">
                                        <input class="radio-primary" type="radio" name="notifLevel" id="notifLevel-all" value="0" checked/>
                                        <label class="form-check-label" for="notifLevel-all"> ALL</label>
                                    </div>
                                    <div class="flex flex-row">
                                        <input type="radio" name="notifLevel" id="notifLevel-server" value="1">
                                        <label for="notifLevel-joinLeave"> Only server messages</label>
                                    </div>
                                  
                                    <div class="flex flex-row">
                                        <input type="radio" name="notifLevel" id="notifLevel-none" value="2">
                                        <label for="notifLevel-none"> None</label>
                                    </div>    
                                </ul>
                                <script>
                                  document.addEventListener("DOMContentLoaded", ()=>{
                                    //document.getElementById("notif-enabled").checked = settings.Notif.enabled
                                    //settings.Notif.level = settings.Notif.enabled ? "0" : "2"
                                      if(settings.Notif.level == "0"){
                                          document.getElementById("notifLevel-text").innerText = "ALL"
                                          document.getElementById("notifLevel-all").checked = "true"
                                          //document.getElementById("notif-enabled").checked = true
                                          settings.Notif.enabled = true
                                        }else if(settings.Notif.level == "1"){
                                          document.getElementById("notifLevel-text").innerText = "SERVER ONLY"
                                          document.getElementById("notifLevel-server").checked = "true"
                                          //document.getElementById("notif-enabled").checked = true
                                          settings.Notif.enabled = true
                                        }else{
                                          document.getElementById("notifLevel-text").innerText = "NONE"
                                          document.getElementById("notifLevel-none").checked = "true"
                                          //document.getElementById("notif-enabled").checked = false
                                          settings.Notif.enabled = false
                                        }
                                  })
                                  // document.getElementById("notif-enabled").addEventListener("change",()=>{
                                  //   settings.Notif.enabled = document.getElementById("notif-enabled").checked
                                  //   settings.Notif.level = settings.Notif.enabled ? "0" : "2"
                                  //   settubgs.Notif.enabled ? document.getElementById("notifLevel-ALL").checked = true : document.getElementById("notifLevel-none").checked = true
                                  //   !settings.Debug.enabled ? null : console.log(`Notifications ${document.getElementById("notif-enabled").checked ? "ENABLED":"DISABLED"}`)
                                  //   localStorage.setItem("settings", JSON.stringify(settings))
                                  // })
                                  document.getElementById('notifRadio').addEventListener('change', function(event) {
                                    if (event.target.name === 'notifLevel') {
                                        !settings.Debug.enabled ? null : console.log(`You selected: ${event.target.value}`);
                                        if(event.target.value == "0"){
                                          document.getElementById("notifLevel-text").innerText = "ALL"
                                          settings.Notif.enabled = true
                                          //document.getElementById("notif-enabled").checked = true
                                        }else if(event.target.value == "1"){
                                          document.getElementById("notifLevel-text").innerText = "SERVER ONLY"
                                          settings.Notif.enabled = true
                                          //document.getElementById("notif-enabled").checked = true
                                        }else{
                                          document.getElementById("notifLevel-text").innerText = "NONE"
                                          settings.Notif.enabled = false
                                          //document.getElementById("notif-enabled").checked = false
                                        }
                                        settings.Notif.level = event.target.value
                                      localStorage.setItem("settings", JSON.stringify(settings))
                                    }
                                  });
                                </script>
                            </div>
                          </div>
                          <div class="collapse collapse-plus bg-base-200">
                            <input type="checkbox" name="my-accordion-3" />
                            <div class="collapse-title text-xl font-medium">Debug</div>
                            <div class="collapse-content">
                              <!-- <input type="checkbox" name="debug-enabled" id="debug-enabled">
                                    <label for="debug-enabled">Debug enabled</label> -->
                                    <h5>Debug Level: <span id="debugLevel-text">ALL</span></h5>
                                    <div class="form-check" id="debugRadio">
                                    
                                        <input class="form-check-input" type="radio" name="debugLevel" id="debugLevel-all" value="0"/>
                                        <label class="form-check-label" for="debugLevel-all"> ALL </label>

                                      
                                        <input type="radio" name="debugLevel" id="debugLevel-server" value="1" disabled>
                                        <label for="debugLevel-joinLeave" class="" style="color:gray;"> Important </label>
                                    
                                      
                                        <input type="radio" name="debugLevel" id="debugLevel-none" value="2" checked>
                                        <label for="debugLevel-none"> None </label>
                                      
                                    </div>
                                    <a href="/liveshare">Liveshare</a>
                                    <script>
                                      document.addEventListener("DOMContentLoaded", ()=>{
                                        //document.getElementById("debug-enabled").checked = settings.Debug.enabled
                                        //settings.Debug.level = settings.Debug.enabled ? "0" : "2"
                                          if(settings.Debug.level == "0"){
                                              document.getElementById("debugLevel-text").innerText = "ALL"
                                              document.getElementById("debugLevel-all").checked = "true"
                                              settings.Debug.enabled = true
                                              //document.getElementById("debug-enabled").checked = true
                                            }else if(settings.Debug.level == "1"){
                                              document.getElementById("debugLevel-text").innerText = "SERVER ONLY"
                                              document.getElementById("debugLevel-server").checked = "true"
                                              settings.Debug.enabled = true
                                              //document.getElementById("debug-enabled").checked = true
                                            }else{
                                              document.getElementById("debugLevel-text").innerText = "NONE"
                                              document.getElementById("debugLevel-none").checked = "true"
                                              settings.Debug.enabled = false
                                              //document.getElementById("debug-enabled").checked = false
                                            }
                                      })
                                      // document.getElementById("debug-enabled").addEventListener("change",()=>{
                                      //   settings.Debug.enabled = document.getElementById("debug-enabled").checked
                                      //   settings.Debug.level = settings.Debug.enabled ? "0" : "2"
                                      //   settubgs.Debug.enabled ? document.getElementById("debug-ALL").checked = true : document.getElementById("debug-none").checked = true
                                      //   localStorage.setItem("settings", JSON.stringify(settings))
                                      // })
                                      document.getElementById('debugRadio').addEventListener('change', function(event) {
                                        if (event.target.name === 'debugLevel') {
                                            !settings.Debug.enabled ? null : console.log(`You selected: ${event.target.value}`);
                                            if(event.target.value == "0"){
                                              document.getElementById("debugLevel-text").innerText = "ALL"
                                              settings.Debug.enabled = true
                                              //document.getElementById("debug-enabled").checked = true
                                            }else if(event.target.value == "1"){
                                              document.getElementById("debugLevel-text").innerText = "SERVER ONLY"
                                              settings.Debug.enabled = true
                                              //document.getElementById("debug-enabled").checked = true
                                            }else{
                                              document.getElementById("debugLevel-text").innerText = "NONE"
                                              settings.Debug.enabled = false
                                              //document.getElementById("debug-enabled").checked = false
                                            }
                                            settings.Debug.level = event.target.value
                                          localStorage.setItem("settings", JSON.stringify(settings))
                                        }
                                      });
                                    </script>
                            </div>
                          </div>
                          
                      </div>
                    </div>
                  </div>
              </div>
        </div>
        
          
        
       
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/keycloak-js@latest/dist/keycloak.min.js"></script>
        <script src="/public/src/shared.js"></script>
        <script src="/public/src/chat.js"></script>
    </body>
</html>